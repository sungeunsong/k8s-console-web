<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>ì½˜ì†”ì›¹ - Helm ë°°í¬ ê´€ë¦¬</title>
  </head>
  <body>
    <h1>ì½˜ì†”ì›¹</h1>

    <form method="POST" action="/create">
      <button type="submit">* ìƒˆ í™˜ê²½ ë°°í¬ (Mongo + SSE)</button>
    </form>

    <hr />

    <h2>ğŸ“‹ ë°°í¬ëœ í™˜ê²½ ë³´ê¸°</h2>
    <button onclick="loadReleases()">* í™˜ê²½ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°</button>
    <ul id="release-list"></ul>

    <script>
      function loadReleases() {
        fetch("/releases")
          .then((res) => res.json())
          .then((releases) => {
            const ul = document.getElementById("release-list");
            ul.innerHTML = ""; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”
            releases.forEach((r) => {
              const li = document.createElement("li");
              li.innerHTML = `
              ğŸ”¹ <strong>${r.name}</strong> (namespace: ${r.namespace}) â€“ ${r.status}
              <form method="POST" action="/delete" style="display:inline;">
                <input type="hidden" name="name" value="${r.name}">
                <input type="hidden" name="namespace" value="${r.namespace}">
                <button type="submit">ğŸ—‘ï¸ ì‚­ì œ</button>
              </form>
            `;
              ul.appendChild(li);
            });
          });
      }
    </script>
  </body>
</html>
